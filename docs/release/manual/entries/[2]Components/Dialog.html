<!DOCTYPE html>
<html>
<style>
@font-face {
  font-family: 'Roboto';
  font-style: normal;
  font-weight: 400;
  src: url('../../fonts/Roboto/Roboto-Regular.ttf');
}
@font-face {
  font-family: 'Inconsolata';
  font-style: normal;
  font-weight: 400;
  src: url('../../fonts/Inconsolata/Inconsolata-Regular.ttf');
}
body{
    background-color: #fff !important;
      font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif !important;
      padding: 0px !important;
      overflow:hidden;
      font-size: 17.5px;
}
.container{
  padding-top:20px;
  padding-right:46px !important;
    margin-left:35px !important;
  width:auto !important;
  position:relative;
  overflow-y:auto;
    height: -webkit-fill-available;
}
.table-striped tbody tr:nth-child(odd) td, .table-striped tbody tr:nth-child(odd) th {
    background-color: #d2d2d2 !important;
}
a{
  color:blue !important;
}
h1, h2, h3, h4, h5, h6{
    text-shadow: none !important;
}
.table {
    border-radius: 0 !important;
    border: 1px solid rgba(0, 0, 0, 0.15) !important;
}
.table-bordered thead:first-child tr:first-child th:first-child, .table-bordered tbody:first-child tr:first-child td:first-child{
    border-radius: 0 !important;
    border: 1px solid rgba(0, 0, 0, 0.15) !important;
}
.table-bordered th, .table-bordered td {
    border-radius: 0 !important;
    border: 1px solid rgba(0, 0, 0, 0.15) !important;
}

.vCodeBlock{
  display: block !important;
  margin-bottom:10px;
  height:auto !important;
    border-radius: 3px;

}

code, pre{
    border: 1px solid rgba(0, 0, 0, 0.15) !important;
    font-family: "Inconsolata", "Helvetica Neue", Helvetica, Arial, sans-serif !important;
    font-size: 17.5px!important;
}
pre code{
  border:none !important;
  font-size: 17.5px!important;
}



/* Perfect scrollbar */
.ps__thumb-y, .ps__thumb-x{
  background-color: #6b6b6b !important;
}
.ps__thumb-y{
width:11px !important;
}
.ps__thumb-x{
height:11px !important;
}
.ps > .ps__rail-x,
.ps > .ps__rail-y {
  background-color:transparent;
  /*  background-color: #d2d2d2 !important;*/
    display: block !important;
}
.ps > .ps__rail-y {
background-color: #cbcbcb !important;
/*  opacity: 0.6;*/
  /*height:100% !important;*/
}



.colorBand{
  width:100%;
  height:5px;
  background-color: #333333;
  margin-top: 50px;
}


video{
  max-width: 100%;
}
.video-js{
  max-width: 100%;
  margin-bottom:20px;
}


.video-js .vjs-big-play-button {
  top:calc(50% - 0.75em) !important;
  left: calc(50% - 1.5em) !important;
}

.selectDisabled {
    -webkit-appearance: none;
    -moz-appearance: none;
    text-indent: 1px;
    text-overflow: '';
}


@font-face {
  font-family: 'Inconsolata';
  font-style: normal;
  font-weight: 400;
  src: url('../../fonts/Inconsolata/Inconsolata-Regular.ttf');
}
.vGround {
  width: 100%;
  margin-bottom:20px;
}
.vGroundMenu {
    box-sizing: border-box;
  display: flex;
  flex-direction: row;
  width: 100%;
  height: 50px;
  align-items: flex-end;
    color: hsl(220, 14%, 71%);
}
.vGroundMenuButton{
  min-width:60px;
    text-align: center;
    padding: 2px 4px;
    box-sizing: border-box;
    cursor:pointer;
    background-color: #fff;
    color: #6b6b6b;
}
.vGroundMenuShowHead{
  margin-left: auto;
   margin-right: 10px; 
}
.vGroundMenuButton:hover{
  color:white;
    background-color:#bebebe;
}
.vGroundMenuActive{
  color:white;
    background-color:#18c796;
}

.vGroundContent {
  font-family: "Inconsolata", "Helvetica Neue", Helvetica, Arial, sans-serif !important;
  width: calc(100% - 12px);
  height: 340px !important;
  border: 1px solid hsl(220, 13%, 18%);
  box-shadow:none;
  border-radius: 0;
  position:relative;
  resize:none;
  display:none;
}

.vGroundIframe{
  font-family: "Inconsolata", "Helvetica Neue", Helvetica, Arial, sans-serif !important;
  width: calc(100% - 12px);
  height: 340px;
    border: 1px solid rgba(0, 0, 0, 0.15);
  box-shadow:none;
  border-radius: 0;
  resize:none;
  background-color:white;
  display:none;
}

.CodeMirror{  
  margin: 0px 0px 10px 0px !important;
}

.cm-s-one-dark .CodeMirror, .cm-s-one-dark .CodeMirror-scroll {
  font-family: "Inconsolata, Monaco, Consolas, "Courier New", Courier"!important;
  /*    font-size: 14px!important;*/
}

.CodeMirror-line {
  border: 0 !important;
}

.CodeMirror textarea {
  display: block !important;
}

.CodeMirror-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  height: auto;
  max-height: 600px;
  cursor: text;
  background-color: hsl(220, 13%, 18%) !important;
  line-height: 100% !important;
}

.cm-s-one-dark .CodeMirror-linenumber {
  min-width: auto !important;
  min-width: 20px !important;
  padding: 0 !important;
  padding-right: 20px !important;
  text-align: right !important;
  white-space: normal !important;
  background-color: hsl(220, 13%, 18%) !important;
}

.CodeMirror-gutters {
  border: none !important;
  background-color: hsl(220, 13%, 18%) !important;
}
.cm-s-one-dark .CodeMirror-linenumber {
  color: #bebebe !important;
  font-size: 14px!important;
}

.vCodeBlock .CodeMirror-cursor {
  display: none !important;
}
.CodeMirror-selected {
  background: hsl(220, 60%, 28%) !important;
}
.cm-s-blackboard .CodeMirror-line::selection, .cm-s-blackboard .CodeMirror-line > span::selection, .cm-s-blackboard .CodeMirror-line > span > span::selection {
background-color:#CC0000 !important;
}

.CodeMirror{  
  margin: 20px 0px;
}
/* As strapdown uses google prettify for code blocks (```code``` and `code`) we need to override
all colors at `code` which will be used as simple text. Code blocks ```code``` will be parsed
via codeMirror */
.pln { color: black !important; }

@media screen {
  .str { color: black !important; }
  .kwd { color: black !important; }
  .com { color: black !important; }
  .typ { color: black !important; }
  .lit { color: black !important; }
  /* punctuation, lisp open bracket, lisp close bracket */
  .pun, .opn, .clo { color: black !important; }
  .tag { color: black !important; }
  .atn { color: black !important; }
  .atv { color: black !important; }
  .dec, .var { color: black !important; }
  .fun { color: color: black !important; }
}


@media print, projection {
  .str { color: black !important; }
  .kwd { color: black !important;}
  .com { color: black !important;}
  .typ { color: black !important;}
  .lit { color: black !important; }
  .pun, .opn, .clo { color: black !important; }
  .tag { color: black !important;}
  .atn { color: black !important; }
  .atv { color: black !important; }
}


h1, h2, h3, h4, h5, h6, p{
  max-width:900px;
}
h1, h2, h3, h4{
  margin: 35px 0px 20px 0px !important;
}
p, ul, .prettyprint lang- prettyprinted{
  font-size: 17.5px;
}
</style>
<xmp theme="slate" style="display:none;">

  

  # Dialog

## Introduction

The emerging component vc-dialog can contain text and other vComet components or HTML components.
The basic dialog consists of a container, but it is possible to add header and footer, which will contain the close button.

To use it import vc-dialog in the head of the HTML document:
<textarea class="vCodeBlock" language="html"><head>
  <script>
    vComet.import("/vComet/ui/vc-dialog.html");
  </script>
<head></textarea>

## Declarative usage

The vc-dialog created declaratively is composed by vc-section to add the content and footer.

To indicate that the vc-section will contain the content of the dialog it is necessary to add the attribute `type="content"`, and to indicate that it will contain the footer add the attribute `type="footer"`.

<textarea class="vCodeBlock" language="html"><vc-dialog id="myDialog" heading="Dialog test">
  <vc-section type="content">
    <span>My dialog content</span>
  </vc-section>
  <vc-section type="footer" location="right">
    <vc-button value="OK" onclick="alert('Â¡Hey!');"></vc-button>
  </vc-section>
</vc-dialog>

<!-- Trigger button-->
<vc-button value="SHOW" onclick="document.querySelector('#myDialog').open()"></vc-button></textarea>

## Programmatic usage

Unlike vc-dialog created declaratively, programmatic vc-dialog does not need vc-section. To add content vc-dialog have `addContent` method, and to add footer use `addFooter`.

<textarea class="vCodeBlock" language="javascript">vcomet.onReady(function () {
  // Create vc-dialog
  var myDialog = document.createElement("vc-dialog");
  // Create content elements
  var myContent = document.createElement("span");
  var myButton = document.createElement("vc-button");

  // Set properties
  myDialog.heading = "Dialog Test";
  myDialog.setAttribute("id", "myDialog");
  myContent.innerHTML = "Programmatic dialog content";
  myButton.value = "OK";

  // Append vc-dialog
  document.querySelector("body").appendChild(myDialog);

  // Add the content and the footer to the vc-dialog
  myDialog.addContent(myContent);
  myDialog.addFooter(myButton);
});</textarea>

<textarea class="vCodeBlock" language="html"><!-- Trigger button-->
<vc-button value="SHOW" onclick="document.querySelector('#myDialog').open()" expand="inline"></vc-button></textarea> 

## Examples

### Interactive dialog
Using different vc-dialog properties it can be draggable, resizeable, maximizable, minimizable and it can be closed if it loses focus.
It also possible to establish maximum or minimum height and width using vc-dialog properties.

<textarea class="vCodeBlock" language="html"><vc-dialog id="myDialog" heading="You can:" max-width="400" max-height="400" drag="true" maximize="true" minimize="true" resize="true" blur="true">
  <vc-section type="content">
    <p>Resize me</p>
    <p>Drag me</p>
    <p>Minimize me</p>
    <p>Maximize me</p>
  </vc-section>
</vc-dialog>

<!-- Trigger button-->
<vc-button value="SHOW" onclick="document.querySelector('#myDialog').open()" ></vc-button></textarea>

### Containing others components
This example shows a vc-dialog containing vc-form components. 

<textarea class="vCodeBlock" language="html"><vc-dialog id="myDialog" modal="true" heading="Login">
  <vc-section type="content">
    <vc-form action="#" method="get">
      <vc-text name="userName" type="text" placeholder="User name" label="User name" ></vc-text>
      <vc-text name="userPass" type="Password" placeholder="Password" label="Password"></vc-text>
      <vc-button type="submit" value="Sign in" expand="full"></vc-button>
    </vc-form>
  </vc-section>
</vc-dialog>

<!-- Trigger button-->
<vc-button value="LOGIN" onclick="document.querySelector('#myDialog').open()" ></vc-button></textarea>


### Dynamically content dialog
Dynamically and using the vc-dialog methods it is possible modify the content, footer or properties. Also there are different callbacks that can be very useful. 

In this example first creates the dialog declaratively and then programmatically changes the content.
<textarea class="vCodeBlock" language="html"><vc-dialog id="myDialog" max-width="250" min-height="100">
  <vc-section type="content">
    <span>This content will change</span>
  </vc-section>
</vc-dialog>

<!-- Trigger button-->
<vc-button value="SHOW" onclick="document.querySelector('#myDialog').open()" ></vc-button></textarea>

<textarea class="vCodeBlock" language="javascript">vcomet.onReady(function () {
  var myDialog = document.querySelector("#myDialog");
  var newContent = document.createElement("span");

  newContent.innerHTML = "This is the new dynamically dialog content";

  // When the dialog is opened the functionality will be executed
  myDialog.onOpen(function () {
    myDialog.setContent(newContent);
  });

});</textarea>



</xmp>

<script>
// Onload launch strapdown
window.addEventListener('load', function(){
  var strapdown = document.createElement("script");
  strapdown.onload = function(){
    strapdownLoaded();
  };
  strapdown.src = "../../frameworks/strapdown/strapdown.js";
  document.head.appendChild(strapdown);
}, false );

// After strapdown parser launch perfectscrollbar and videojs
function strapdownLoaded() {
  // PerfectScrollbar
  var perfectScrollbarCss = document.createElement("link");
  perfectScrollbarCss.rel = "stylesheet";
  perfectScrollbarCss.href = "../../frameworks/perfectScrollbar/perfect-scrollbar.css";
  document.head.appendChild(perfectScrollbarCss);
  var perfectScrollbarJs = document.createElement("script");
  perfectScrollbarJs.onload = function(){
    perfectScrollbarLoaded();
  };
  perfectScrollbarJs.src = "../../frameworks/perfectScrollbar/perfect-scrollbar.js";
  document.head.appendChild(perfectScrollbarJs);

  // Video.js
  var videoCss = document.createElement("link");
  videoCss.rel = "stylesheet";
  videoCss.href = "../../frameworks/videoJS/videoJS.css";
  document.head.appendChild(videoCss);
  var videoIE = document.createElement("script");
  videoIE.src = "../../frameworks/videoJS/videoJSIE.js";
  document.head.appendChild(videoIE);
  var videoJs = document.createElement("script");
  videoJs.src = "../../frameworks/videoJS/videoJS.js";
  document.body.appendChild(videoJs);

  // CodeMirror
  var cMirrorCss = document.createElement("link");
  cMirrorCss.rel = "stylesheet";
  cMirrorCss.href = "../../frameworks/codeMirror/lib/codemirror.css";
  document.head.appendChild(cMirrorCss);
  var cMirrorTheme = document.createElement("link");
  cMirrorTheme.rel = "stylesheet";
  cMirrorTheme.href = "../../frameworks/codeMirror/theme/one-dark.css";
  document.head.appendChild(cMirrorTheme);
  var cMirrorJs = document.createElement("script");
  cMirrorJs.onload = function(){
    codeMirrorLoaded();
  };
  cMirrorJs.src = "../../frameworks/codeMirror/lib/codemirror.js";
  document.head.appendChild(cMirrorJs);

}

function perfectScrollbarLoaded(){
  var psMD = new PerfectScrollbar('#content');
}

function codeMirrorLoaded(){
  var cMirrorJsMode = document.createElement("script");
  cMirrorJsMode.onload = function(){
    var cMirrorCssMode = document.createElement("script");
    cMirrorCssMode.onload = function(){
      var cMirrorHtmlMode = document.createElement("script");
      cMirrorHtmlMode.onload = function(){
        var cMirrorXmlMode = document.createElement("script");
        cMirrorXmlMode.onload = function(){
          codeMirrorModeLoaded();
        };
        cMirrorXmlMode.src = "../../frameworks/codeMirror/mode/xml/xml.js";
        document.head.appendChild(cMirrorXmlMode);
      };
      cMirrorHtmlMode.src = "../../frameworks/codeMirror/mode/htmlmixed/htmlmixed.js";
      document.head.appendChild(cMirrorHtmlMode);
    };
    cMirrorCssMode.src = "../../frameworks/codeMirror/mode/css/css.js";
    document.head.appendChild(cMirrorCssMode);
  };
  cMirrorJsMode.src = "../../frameworks/codeMirror/mode/javascript/javascript.js";
  document.head.appendChild(cMirrorJsMode);
}

function codeMirrorModeLoaded(){
  var vGrounds = document.querySelectorAll(".vGround");
  vGrounds.forEach(function(vGs){
    var htmlCodeMirror = CodeMirror(function(elt) {
      var vGroundHtml = vGs.querySelectorAll(".vGroundContentHtml")[0];
      vGroundHtml.parentNode.replaceChild(elt, vGroundHtml);
    }, {value: vGs.querySelectorAll(".vGroundContentHtml")[0].value,
    mode: "htmlmixed",
    lineNumbers: true,
    readOnly:false,
    viewportMargin: Infinity,
    theme:"one-dark"
  });
  htmlCodeMirror.display.wrapper.classList.add("vGroundContent");
  htmlCodeMirror.display.wrapper.classList.add("vGroundContentHtml");


  var jsCodeMirror = CodeMirror(function(elt) {
    var vGroundJs = vGs.querySelectorAll(".vGroundContentJs")[0];
    vGroundJs.parentNode.replaceChild(elt, vGroundJs);
  }, {value: vGs.querySelectorAll(".vGroundContentJs")[0].value,
  mode: "javascript",
  lineNumbers: true,
  readOnly:false,
  viewportMargin: Infinity,
  theme:"one-dark"
});
jsCodeMirror.display.wrapper.classList.add("vGroundContent");
jsCodeMirror.display.wrapper.classList.add("vGroundContentJs");


var cssCodeMirror = CodeMirror(function(elt) {
  var vGroundCss = vGs.querySelectorAll(".vGroundContentCss")[0];
  vGroundCss.parentNode.replaceChild(elt, vGroundCss);
}, {value: vGs.querySelectorAll(".vGroundContentCss")[0].value,
mode: "css",
lineNumbers: true,
readOnly:false,
viewportMargin: Infinity,
theme:"one-dark"
});
cssCodeMirror.display.wrapper.classList.add("vGroundContent");
cssCodeMirror.display.wrapper.classList.add("vGroundContentCss");
});

// Initialize playgrounds
initializeIframes();

//Initialize codeBlocks
initCodeBlock();
}

function initCodeBlock(){
  var tidy = true;  //TODO get from md
  var indent = 2; //TODO get from md
  var vCodeBlocks = document.querySelectorAll(".vCodeBlock");
  vCodeBlocks.forEach(function(vCB){
    var cbLanguage = vCB.getAttribute("language") || "htmlmixed";
    if(cbLanguage === "html"){
      cbLanguage = "htmlmixed";
    }
    if(cbLanguage === "js"){
      cbLanguage = "javascript";
    }
    var codeBlockCM = CodeMirror(function(elt) {
      vCB.parentNode.replaceChild(elt, vCB);
    }, {value: vCB.value,
      readOnly:true,
      lineNumbers: true,
      mode: cbLanguage,
      viewportMargin: Infinity,
      theme:"one-dark"
    });
    codeBlockCM.display.wrapper.classList.add("vCodeBlock");
    if(tidy){
    //  codeBlockCM.autoFormatRange({line:0, ch:0}, {line:codeBlockCM.lineCount()});  //TODO no longer exists
    }
  });
}

function initializeIframes(){
  var iframes = document.querySelectorAll(".vGround");
  iframes.forEach(function(ifr){
    var ifrMenu = ifr.querySelector(".vGroundMenu");
    ifrMenu.querySelectorAll(".vGroundMenuButton").forEach(function(menuBtt){
      if(menuBtt.getAttribute("codeType") === "result"){
        vGroundResult(menuBtt);
      }
    });
  });
}

var SHOW_HEAD = "Show head";
var HIDE_HEAD = "Hide head";
function escapeRegExp(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
}
var headOpen = "<head>";
var headClose = "</head>";
var headRegex = new RegExp(
  escapeRegExp(headOpen) +
  "(?:(?!" +
  escapeRegExp(headOpen) +
  ")[\\s\\S])*" +
  escapeRegExp(headClose) +
  "(\\r\\n|\\r|\\n){0,1}",
  "g"
);

function vGroundHTML(node) {
  toggleShowHead(node, true);
  groundSetActive(node);
}

function vGroundJS(node) {
  toggleShowHead(node, false);
  groundSetActive(node);
}

function vGroundCSS(node) {
  toggleShowHead(node, false);
  groundSetActive(node);
}

function toggleShowHead(node, toggleTo) {
  var showHead = node.parentNode.querySelectorAll(".vGroundMenuShowHead")[0];
  if (toggleTo) {
    showHead.innerHTML = SHOW_HEAD;
    showHead.setAttribute("style", "display:block;");
  } else {
    showHead.setAttribute("style", "display:none;");
  }
}

function showHead(node) {
  htmlMirror = node.parentNode.parentNode.getElementsByClassName("vGroundContentHtml")[0];
  var htmlContent = htmlMirror.CodeMirror.getValue();
  if (node.innerHTML.toLowerCase().includes("show")) {
    var savedHead = htmlMirror.getAttribute("head");
    if (savedHead) {
      savedHead = decodeURIComponent(savedHead).trim() + "\n";
    } else {
      savedHead = "";
    }
    var fullContent = savedHead + htmlContent;
    htmlMirror.CodeMirror.setValue(fullContent);
    setTimeout(() => {
      htmlMirror.CodeMirror.refresh();
    }, 0);
    var showHead = node.parentNode.querySelectorAll(".vGroundMenuShowHead")[0];
    node.innerHTML = HIDE_HEAD;
  } else {
    htmlMirror.CodeMirror.setValue(htmlMirror.CodeMirror.getValue().replace(headRegex, ""));
    setTimeout(() => {
      htmlMirror.CodeMirror.refresh();
    }, 0);
    node.innerHTML = SHOW_HEAD;
  }
}

function vGroundResult(node) {
  toggleShowHead(node, false);
  groundSetActive(node);
  var vGroundContent = node.parentNode.parentNode.getElementsByClassName("vGroundContent")[0];
  var vGroundIframe = node.parentNode.parentNode.getElementsByClassName("vGroundIframe")[0];
  var iframeContent = vGroundIframe.contentWindow.document || vGroundIframe.contentDocument;
  var iframeHead = iframeContent.head;
  var iframeBody = iframeContent.body;
  iframeBody.setAttribute("style", "position:relative;");

  var htmlContent = getHtml(node);
  iframeHead.innerHTML = "";
  iframeBody.innerHTML = "";

  if (htmlContent.head && htmlContent.head != "") {
    iframeHead.appendChild(fragmentFromString(htmlContent.head));
  } else {
    var commonHead = "";
    htmlMirror = node.parentNode.parentNode.getElementsByClassName("vGroundContentHtml")[0];
    var savedHead = htmlMirror.getAttribute("head");
    if (savedHead) {
      commonHead = decodeURIComponent(savedHead);
    }
    iframeHead.appendChild(fragmentFromString(commonHead));
  }
  iframeBody.appendChild(fragmentFromString(htmlContent.body));
  iframeHead.appendChild(getCss(node));
  iframeBody.appendChild(getJs(node));
}

fragmentFromString = function (str) {
  // Test createContextualFragment support
  if (!("__supportsContextualFragment" in window)) {
    try {
      document.createRange().createContextualFragment("test");
      window.__supportsContextualFragment = true;
    } catch (error) {
      window.__supportsContextualFragment = false;
    }
  }
  if (window.__supportsContextualFragment) {
    return document.createRange().createContextualFragment(str);
  } else {
    var temp = document.createElement("template");
    temp.innerHTML = str;
    return temp.content;
  }
};

function getCss(node) {
  var cssContent = node.parentNode.parentNode.getElementsByClassName("vGroundContentCss")[0].CodeMirror.getValue();
  var cssSheet = document.createElement("style");
  cssSheet.rel = "stylesheet";
  cssSheet.innerHTML = cssContent;
  return cssSheet;
}

function getJs(node) {
  var jsContent = node.parentNode.parentNode.getElementsByClassName("vGroundContentJs")[0].CodeMirror.getValue();
  var jsScript = document.createElement("script");
  jsScript.innerHTML = jsContent;
  return jsScript;
}

function getHtml(node) {
  var result = {};
  result.head = "";
  result.body = "";
  var headFound = false;
  var bodyFound = false;
  var htmlContent = node.parentNode.parentNode.getElementsByClassName("vGroundContentHtml")[0].CodeMirror.getValue();
  var headResult = "";
  var headMatches = htmlContent.match(headRegex);
  if (headMatches) {
    headFound = true;
    result.head = cleanMatch(headMatches[0], headOpen, headClose);
  } else {
    if (!node.parentNode.parentNode.getElementsByClassName("vGroundContentHtml")[0].getAttribute("head")) {
      
    }
  }

  var bodyOpen = "<body>";
  var bodyClose = "</body>";
  var bodyRegex = new RegExp(
    escapeRegExp(bodyOpen) +
    "(?:(?!" +
    escapeRegExp(bodyOpen) +
    ")[\\s\\S])*" +
    escapeRegExp(bodyClose) +
    "(\\r\\n|\\r|\\n){0,1}",
    "g"
  );
  var bodyResult = "";
  var bodyMatches = htmlContent.match(bodyRegex);
  if (bodyMatches) {
    bodyFound = true;
    result.body = cleanMatch(bodyMatches[0], bodyOpen, bodyClose);
  }
  if (!headFound && !bodyFound) {
    result.body = htmlContent;
  } else if (headFound && !bodyFound) {
    result.body = htmlContent.replace(headRegex, "");
  }
  return result;
}


function groundSetActive(node) {
  var vGroundContent = node.parentNode.parentNode.getElementsByClassName("vGroundContent");
  var vGroundIframe = node.parentNode.parentNode.getElementsByClassName("vGroundIframe")[0];
  Array.prototype.forEach.call(vGroundContent, function (vGC) {
    vGC.setAttribute("style", "display:none;");
  });
  vGroundIframe.setAttribute("style", "display:none;");
  var codeType = node.getAttribute("codeType");
  switch (codeType) {
    case "result":
      vGroundIframe.setAttribute("style", "display:block;");
      break;
    case "html":
      vGroundContent = node.parentNode.parentNode.getElementsByClassName("vGroundContentHtml")[0];
      var htmlContent = vGroundContent.CodeMirror.getValue();
      var headMatch = htmlContent.match(headRegex);
      if (headMatch) {
        var headContent = headMatch[0];
        vGroundContent.setAttribute("head", encodeURIComponent(headContent));
        htmlContent = htmlContent.replace(headRegex, "");
        vGroundContent.CodeMirror.setValue(htmlContent);
        setTimeout(() => {
          vGroundContent.CodeMirror.refresh();
        }, 0);
      } else {
        if (!vGroundContent.getAttribute("head")) {
          var cHead = null;
          
          if (cHead) {
            vGroundContent.setAttribute("head", encodeURIComponent(cHead));
          }
        }
      }
      vGroundContent.setAttribute("style", "display:block;");
      break;
    case "js":
      vGroundContent = node.parentNode.parentNode.getElementsByClassName("vGroundContentJs")[0];
      vGroundContent.setAttribute("style", "display:block;");
      break;
    case "css":
      vGroundContent = node.parentNode.parentNode.getElementsByClassName("vGroundContentCss")[0];
      vGroundContent.setAttribute("style", "display:block;");
      break;
    default:

  }
  var sibligns = node.parentNode.childNodes;
  sibligns.forEach(function (sibl) {
    sibl.classList.remove("vGroundMenuActive");
  });
  node.classList.add("vGroundMenuActive");
}



function cleanMatch(match, open, close) {
  match = match.trim();
  match = match.substring(open.length, match.length - close.length).trim();
  return match;
}
</script>



</html>
