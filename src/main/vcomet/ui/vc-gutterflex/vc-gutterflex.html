<script type="text/javascript">
  vcomet.element("vc-gutterflex", "vc-gutterflex.css", {
    properties: {
      /*
        @property {String} type
        @description Gutter direction type
        Values: horizontal, vertical
        Default: horizontal
      */
      type: {
        value: "horizontal",
        reflect: true
      },
    },
    privateProperties:{
      /*
        @property (private) {Object} _misc 
        @description Tree internal used data
      */
      misc: {
        value: {}
      }
    },
    functions: {
      /*  
        @function (private) 
        @description
      */
      resize: function() {
        
      }
    },
    privateFunctions: {
      /*
        @function (private) setUpGutter
        @description Apply gutter styling and user customizable behaviour
      */
      setUpGutter: function() {
        var el = this;
        // Set gutter type style
        if(el.type == "vertical"){
          // el.classList.add("vc-gutter-vertical");
          el._misc.posProp = el.type == "vertical" ? "top" : "left";
          el._misc.sizeProp = el.type == "vertical" ? "offsetHeight" : "offsetWidth";
        }
        // Check if it is a nested gutter
        // ** Solves Safari flex child fit parent bug
        if(el.parentNode.tagName == "VC-SECTION"){
          el.style.position = "absolute";
        }
        el._misc.size = el[el._sizeProp];
      },
      /*
        @function (private) createSeparator
        @description Create splitter and configure it
      */
      createSeparator: function() {
        var el = this;
        // Create splitter element
        var fragment = document.createDocumentFragment();
        var splitter = document.createElement("div");
        splitter.classList.add("vc-gutter-splitter");
        splitter.classList.add("bg8");
        fragment.appendChild(splitter);

        // Make second section the target of size changes
        var secSection = el.getSourceElements()[1];
        // secSection.classList.add("vc-gutter-sectionSecond");
        // Position splitter centered

        // el._misc.splitterPosition = splitter.style[el._posProp] = (parseFloat(el._misc.gutterSize / 2)) + "px";
   
        // ** Set size as a style property for collapsable configuration purposes
        // var prop = vcomet.util.firstToLowerCase(el._sizeProp.split("offset")[1]);
        // el._resizeSectionSize = secSection.style[prop] = parseFloat(el._gutterSize / 2);
        // Insert splitter
        console.log('secSection', secSection);
        el.insertBefore(fragment, secSection);

        // Store splitter position percentage in respect of gutter size
        // el._storeSplitterPercentage();
        // Create collapsable icon
        // el._setCollapsable(splitter);
      },
    },
    onInit: function() {
      var el = this;
      console.log('HEY');
      // Pointer events attribute required
      el.setAttribute("touch-action", "none");
      // Set up gutter
      el._setUpGutter();
      // Create splitter
      el._createSeparator();
      
    }
  });
</script>
