<script type="text/javascript">
  vcomet.element("vc-newstore", "", {
    themed: false,
    privateProperties: {
      /*
          @property {String} _misc 
          @description 
      */
      _misc: {
        value: ""
      },
      /*
          @property {String} _refs 
          @description 
      */
      _refs: {
        value: ""
      }
    },
    properties: {
      /*
          @property {String} data 
          @description
      */
      data: {
        value: ""
      }
    },
    functions: {
    },
    privateFunctions: {
      /*
          @function _createCallbacks
          @description 
      */
      createCallbacks: function () {
        var el = this;
        vcomet.createCallback("onLoaded", el);
        vcomet.createCallback("onDataLoaded", el);
      },
      /*
          @function _cloneFunctions
          @description 
      */
      cloneFunctions: function (adapter) {
        var el = this;  
        // Clone adapter data object
        Object.assign(el, adapter);
        // Get BaseAdapter prototype functions
        Object.assign(el, adapter.constructor.prototype);
        //
        el.data = adapter._memory.data;
      },
      /*
          @function _importVPA
          @description 
      */
      importVPA: function () {
        var el = this;
        //
        window.define = vcomet.amd.define;
        window.require = vcomet.amd.require;
        // ** TODO - Make paths relative
        vcomet.amd.require([
          vcomet.basePath + "/data/vc-newstore/vpa-amd.js"
        ], function (vpa) {
          //
          vpa.use(vcomet.basePath + "/data/vc-newstore/adapters/MemoryAdapter.js", function (adapter) {
            // Clone adapter functions
            el._cloneFunctions(adapter());
            // Trigger user callback once VPA has been loaded
            vcomet.triggerCallback("onLoaded", el, el, [el]);
          });
        });
      }
    },
    onCreated: function () {
      var el = this;
      // Create element events callbacks
      el._createCallbacks();
      // Import vpa js
      el._importVPA();
    }
  });
</script>