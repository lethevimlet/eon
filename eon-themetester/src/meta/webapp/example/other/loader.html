<eon-anchor state="loader" eon-scroll="eon-scroll" type="top"></eon-anchor>
<div class="card">
    <h1>LOADER</h1>

    <!-- PLAYGROUND -->
    <!-- Playground declaration -->
    <eon-playground class="d-pg d-loader-pg"></eon-playground>

    <script>
        initializePlayground(".d-loader-tmp", ".d-loader-pg");
    </script>

    <!-- Playground content -->
    <template class="d-loader-tmp">
        <div class="template-head">
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Import VimletJS  -->
            <script src="/eon/eon.js"></script>
            <!-- UI components -->
            <script>
                eon.import([
                    "/eon/ui/eon-button",
                    "/eon/ui/eon-loader",
                    "/eon/ui/eon-scroll"
                ]);
            </script>
        </div>
        <!-- EXAMPLES BODY -->
        <div class="template-body">
            <eon-scroll>
                <div class="row d-loader-row">
                    <div class="example">
                        <div class="tSubtitleContainer">
                            <h2>Loader</h2>
                        </div>
                        <div class="tExampleContainer d-loader-example-container">
                            <eon-loader id="d-l1" class="d-loader" duration="1000" effect="linear">
                            </eon-loader>
                            <div class="d-loader-btn-container">
                                <eon-button value="Run page loader" onclick="runLoader()"></eon-button>
                            </div>
                        </div>
                    </div>
                    <div class="example">
                        <div class="tSubtitleContainer">
                            <h2>Loader ease</h2>
                        </div>
                        <div class="tExampleContainer d-loader-example-container">
                            <eon-loader id="d-l2" bar-color="pink" class="d-loader" duration="1000" effect="ease">
                            </eon-loader>
                            <div class="d-loader-btn-container">
                                <eon-button value="Run ease loader" onclick="runEaseLoader()"></eon-button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row d-loader-row">
                    <div class="example">
                        <div class="tSubtitleContainer">
                            <h2>Progress</h2>
                        </div>
                        <div class="tExampleContainer d-loader-example-container">
                            <eon-loader id="d-l3" type="progress" effect="linear" bar-color="rgb(77, 156, 79)" class="d-loader d-progress"
                                duration="1000">
                            </eon-loader>
                            <div class="d-loader-btn-container">
                                <eon-button value="Run progress bar" onclick="runProgress()"></eon-button>
                            </div>
                        </div>
                    </div>
                    <div class="example">
                        <div class="tSubtitleContainer">
                            <h2>Progress ease</h2>
                        </div>
                        <div class="tExampleContainer d-loader-example-container">
                            <eon-loader id="d-l4" type="progress" effect="linear" bar-color="brown" class="d-loader d-progress"
                                bar-class="d-round-bar" duration="1000">
                            </eon-loader>
                            <div class="d-loader-btn-container">
                                <eon-button value="Run progress bar" onclick="runEaseProgress()"></eon-button>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        </eon-scroll>
</div>
<!-- END EXAMPLES BODY -->
<script class="template-js">
    // ** Playground resize fix
    eon.onReady(function () {
        // Iframe content loaded monitoring
        eon.triggerCallback("onLoaded", window.frameElement);

        runLoader();
        runEaseLoader()
        runProgress()
        runEaseProgress()
    });

    var firstLoad = true;
    var interrupt = false;

    function runLoader(l1) {
        var l1 = document.querySelector("#d-l1");

        if (firstLoad) {
            l1.animate(.3);
            setTimeout(function () {
                if (!interrupt) {
                    l1.animate(1);
                }
            }, 2000);
            setTimeout(function () {
                if (!interrupt) {
                    l1.animate(.3);
                }
            }, 3000);
        } else {
            interrupt = true
            l1.animate(0, 10);
            setTimeout(function () {
                l1.animate(1);
            }, 300);
        }
    }

    function runEaseLoader() {
        var l2 = document.querySelector("#d-l2");

        if (firstLoad) {
            l2.animate(.3);
            setTimeout(function () {
                if (!interrupt) {
                    l2.animate(1);
                }
            }, 2000);
            setTimeout(function () {
                if (!interrupt) {
                    l2.animate(.3);
                }
            }, 3000);
        } else {
            interrupt = true
            l2._animate(0, 10);
            setTimeout(function () {
                l2.animate(1);
            }, 300);
        }
    }
    function runProgress() {
        var l3 = document.querySelector("#d-l3");
        if (firstLoad) {
            l3.animate(.75);
            setTimeout(function () {
                if (!interrupt) {
                    l3.animate(1);
                }
            }, 2000);
            setTimeout(function () {
                if (!interrupt) {
                    l3.animate(.75);
                }
            }, 3000);
        } else {
            interrupt = true;
            l3.animate(0, 10);
            setTimeout(function () {
                l3.animate(1);
            }, 300);
        }
    }
    function runEaseProgress() {
        var l4 = document.querySelector("#d-l4");

        if (firstLoad) {
            firstLoad = false;
            l4.animate(.75);
            setTimeout(function () {
                if (!interrupt) {
                    l4.animate(1);
                }
            }, 3000);
            setTimeout(function () {
                if (!interrupt) {
                    l4.animate(.75);
                }
            }, 4500);
        } else {
            //TEST
            interrupt = true;
            l4.animate(0, 10);
            setTimeout(function () {
                l4.animate(.5);
                setTimeout(function () {
                    l4.effect = "ease";
                    l4.animate(1, 2000);
                }, 450);
            }, 300);
        }
    }
</script>

<style class="template-style">
    .d-loader {
        height: 5px !important;
        width: 100% !important;
    }

    .d-loader-example-container {
        flex-direction: column;
        position: relative;
        min-width: 260px;
    }

    .d-loader-btn-container {
        width: 100%;
        height: 100px;
        margin-right: auto;
        display: flex;
        justify-content: flex-end;
        align-items: flex-end;
    }

    .d-progress {
        position: relative;
        height: 15px !important;
        width: 100% !important;
        margin-right: auto;
    }

    .d-round-bar {
        border-radius: 35px;
    }

    /* -- ** TODO - Theming - Loader override -- */
    .d-round-bar .eon-loader-loadingBar {
        border-radius: 35px;
    }
    .d-round-bar .eon-loader-rail {
        background-color: #561616 !important;
    }

    @media (max-width: 580px) {
        .d-loader-row {
            padding: 0px 10px 0 10px !important;
        }
    }

    /* -- Shared cross-examples -- */
    html,
    body {
        height: 100%;
        width: 100%;
        padding: 0;
        margin: 0;
        background-color: #2d2d2d;
        color: #e6e6e6;
        overflow: hidden;
    }

    .row {
        padding: 10px;
        display: flex;
        /* align-items: center; */
        flex-wrap: wrap;
    }

    .example {
        background-color: #383838;
        padding: 10px;
        box-sizing: border-box;
        margin: 15px;
        min-height: 50px;
        flex-grow: 1;
        flex-basis: 0;
    }

    @media (max-width: 580px) {
        .example {
            margin: 10px 0;
            width: 100%;
        }
    }

    h2 {
        margin: 0;
    }

    .tSubtitleContainer {
        margin-bottom: 10px;
    }

    .tExampleContainer {
        display: flex;
    }

    .pink {
        background-color: #b73ba2;
    }

    .blue {
        background-color: #3b78b7 !important;
    }

    .yellow {
        background-color: #b78f47;
    }

    .green {
        background-color: #519a51 !important;
    }

    .red {
        background-color: #9c4747;
    }

    .purple {
        background-color: #6c479c;
    }
</style>
</template>
<!-- END PLAYGROUND -->
</div>