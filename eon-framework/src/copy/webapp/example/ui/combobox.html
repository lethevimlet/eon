<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>eon-COMBOBOX</title>
    <script src="/eon/eon.js"></script>
    <script>
        eon.import([
            "/eon/ui/eon-combobox",
            "/eon/ui/eon-form",
            "/eon/ui/eon-button",
            "/eon/data/eon-store/eon-store.html"
        ]);
    </script>
    <style media="screen">
        html,
        body {
            width: 100%;
            margin: 0;
            padding: 0;
            background-color: #2d2d2d;
            display: flex;
            align-items: center;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }

        body {
            padding-top: 40px;
            padding-bottom: 40px;
        }

        .container {
            width: 60%;
            max-width: 820px;
        }

        .card {
            padding: 10px;
            background-color: #353535;
            margin: 10px;
            display: flex;
            flex-direction: column;
        }

        h1 {
            color: #dcdcdc;
            font-weight: bold;
            font-size: 25px;
        }

        .example {
            background-color: #2d2d2d;
            padding: 10px;
            box-sizing: border-box;
            margin: 0;
            padding: 40px;
            width: 100%;
        }

        eon-combobox {
            margin-bottom: 40px;
        }

        eon-combobox:last-child {
            margin-bottom: 0;
        }

        eon-button {
            margin-left: 10px;
            margin-right: 10px;
        }

        @media (max-width: 900px) {
            .container {
                width: 90%;
                height: 90%;
                max-width: auto;
            }
        }
    </style>
</head>

<body>

    <div class="container main">

        <eon-form default-style="false" action="#" method="get">

            <div class="card">

                <h1>COMBOBOX</h1>

                <div class="example">

                    <eon-combobox label="Color" default="pink" value="grey" inline="false" name="comboTest1" placeholder="Filter active" filter="true">
                        <eon-item value="red" display-value="Red"></eon-item>
                        <eon-item value="green" display-value="Green"></eon-item>
                        <eon-item value="pink" display-value="Pink"></eon-item>
                        <eon-item value="grey" display-value="Grey"></eon-item>
                        <eon-item value="red" display-value="Red"></eon-item>
                        <eon-item value="green" display-value="Green"></eon-item>
                        <eon-item value="pink" display-value="Pink"></eon-item>
                        <eon-item value="grey" display-value="Grey"></eon-item>
                        <eon-item value="red" display-value="Red"></eon-item>
                        <eon-item value="green" display-value="Green"></eon-item>
                        <eon-item value="pink" display-value="Pink"></eon-item>
                        <eon-item value="grey" display-value="Grey"></eon-item>
                        <eon-item value="red" display-value="Red"></eon-item>
                        <eon-item value="green" display-value="Green"></eon-item>
                        <eon-item value="pink" display-value="Pink"></eon-item>
                        <eon-item value="grey" display-value="Grey"></eon-item>
                        <eon-item value="red" display-value="Red"></eon-item>
                        <eon-item value="green" display-value="Green"></eon-item>
                        <eon-item value="pink" display-value="Pink"></eon-item>
                        <eon-item value="grey" display-value="Grey"></eon-item>
                    </eon-combobox>

                    <!-- <eon-combobox default="FR" inline="false" name="comboTest2" display-property="name" placeholder="Store">
                        <eon-store id="storeTest" type="memory" id-property="CC" keys="{region: 'EU'}" url="util/combobox/data.json">
                        </eon-store>
                    </eon-combobox> -->

                    <!-- ** New store -->
                    <eon-combobox id="store-combo" store="true" default="FR" inline="false" name="comboTest2" display-property="name" placeholder="Store">
                        
                    </eon-combobox>

                </div>

            </div>

            <eon-button type="submit" label="Submit"></eon-button>

        </eon-form>

    </div>

    <script type="text/javascript">
        eon.onReady(function () {

            var storeCombo = document.querySelector("#store-combo");

            // ** New store
            var endpoint = new eon.endpoint("rest", "util/combobox/data.json");
          
            // Get request
            endpoint.get("", function (success, data) {
                // Update store data & combo items
                storeCombo.store.data = eon.util.arrayToMap(JSON.parse(data.responseText));
            });

            var selector = document.createElement('eon-combobox');

            var item1 = document.createElement('eon-item');
            var item2 = document.createElement('eon-item');

            selector.name = "Programatic";
            selector.placeholder = "Programatic";
            selector.inline = "false";

            item1.value = "prog1";
            item1.displayValue = "Programatic Item #1";

            item2.value = "prog2";
            item2.displayValue = "Programatic Item #2";

            selector.appendChild(item1);

            setTimeout(function () {
                selector.addItem(item2);
            }, 1000);
            

            document.body.querySelector(".card .example").appendChild(selector);

            setTimeout(function () {
                var combo1 = document.querySelector("eon-combobox");
                combo1.clear();
            }, 1000);

            setTimeout(function () {
                var combo1 = document.querySelector("eon-combobox");
                combo1.reset();
            }, 2000);

        });

    </script>

</body>

</html>