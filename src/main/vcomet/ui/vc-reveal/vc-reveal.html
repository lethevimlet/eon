<template>
    <vc-anchor></vc-anchor>
    <div class="vc-reveal-wrapper"></div>
</template>
<script>
    vcomet.element("vc-reveal", "vc-reveal.css", {
        dependencies: [
            "../vc-anchor",
            "../vc-scroll"
        ],
        privateProperties: {
            /*
                @property (private) {Object} _refs 
                @description Quick access to the reveal structure nodes
            */
            refs: {
                value: {}
            },
            /*
                @property (private) {Object} _misc 
                @description Internal used data
            */
            misc: {
                value: {}
            }
        },
        properties: {
            /*
                @property {Boolean} fill 
                @description 
                Values: true, false
                Default: true
            */
            fill: {
                value: true,
                reflect: true
            }
        },
        privateFunctions: {
            /*
                @function (private) _createRefs
                @description
            */
            createRefs: function () {
                var el = this;

                // Store references
                el._refs.wrapper = el.template.querySelector(".vc-reveal-wrapper");
                el._refs.anchor = el.template.querySelector("vc-anchor");
            },
            /*
                @function (private) _setDefaultStyle
                @description Check if the default element style should be applied
            */
            setDefaultStyle: function () {
                var el = this;
                // Check fill behavior
                if(vcomet.util.isTrue(el.fill)) {
                    // Content style
                    el.classList.add("vc-fill");
                }
            }
        },
        onCreated: function () {
            var el = this;
            // Create content related callbacks

            // Store references
            el._createRefs();
            // ** Apply default items positioning style
            el._setDefaultStyle();
        },
        onInit: function () {
            var el = this;
            var wrapperFragment = document.createDocumentFragment();

            // Create vc-anchor

            // Move source nodes to the wrapper element
            // Get source nodes
            var children = el.getSourceElements();
            // Move children nodes to the new node safely
            while (children.length) {
                // From first to last...
                wrapperFragment.appendChild(children.shift());
            }
            console.log('', el._refs);
            el._refs.wrapper.appendChild(wrapperFragment);
        }
    });
</script>