<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>VC-LOADER</title>

  <!-- Import vcomet js  -->
  <script src="/vcomet/vcomet.js"></script>

  <!-- Example style -->
  <link rel="stylesheet" href="/example/ui/css/style.css">
  <link rel="stylesheet" href="/example/ui/css/loader.css">

  <script>
    vcomet.import("/vcomet/ui/vc-loader");
  </script>

</head>

<body>
  <div class="container">
    <!-- LOADER EASE ELEMENT -->
    <div class="card">
      <vc-loader id="l1" class="loader" duration="1000" effect="linear">
      </vc-loader>
      <h1>LOADER</h1>
      <div class="buttonContainer">
        <button onclick="runLoader()">Run absolute loader</button>
      </div>
    </div>
    <div class="easeContainer">
      <vc-loader id="l2" bar-color="pink" class="loader easeLoader" duration="1000" effect="ease">
      </vc-loader>
    </div>
    <div class="card">
      <h1>LOADER EASE</h1>
      <div class="buttonContainer">
        <button onclick="runEaseLoader()">Run absolute ease loader</button>
      </div>
    </div>
    <div class="card">
      <h1>PROGRESS</h1>
      <div class="buttonContainer">
        <button onclick="runProgress()">Run progress bar</button>
      </div>
      <!-- LOADER LINEAR ELEMENT -->
      <vc-loader id="l3" class="loader progress" type="progress" bar-color="rgb(77, 156, 79)" style="padding-top: 24px;" duration="1000"
        effect="linear">
      </vc-loader>
    </div>
    <div class="card">
      <h1>PROGRESS EASE</h1>
      <div class="buttonContainer">
        <button onclick="runEaseProgress()">Run progress bar</button>
      </div>
      <!-- LOADER LINEAR ELEMENT -->
      <vc-loader id="l4" class="loader progress" type="progress" bar-color="brown" style="padding-top: 24px;" duration="1000" effect="linear">
      </vc-loader>
    </div>
    <script type="text/javascript">

      vcomet.onReady(function () {

        var firstLoad = true;
        var interrupt = false;

        setTimeout(function () {
          var l1 = document.querySelector("#l1");
          var l2 = document.querySelector("#l2");
          var l3 = document.querySelector("#l3");
          var l4 = document.querySelector("#l4");

          l1.onLoadEnd(function () {
            // console.log("Partial load end", (this.limit * 100) + "%");
          });
          l1.onLoadComplete(function () {
            // console.log("Load completed", (this.limit * 100) + "%");
          });

          runLoader()

          runEaseLoader()

          runProgress()

          runEaseProgress()

        }, 100);

        function runLoader() {

          if (firstLoad) {
            l1.animate(.3);
            setTimeout(function () {
              if (!interrupt) {
                l1.animate(1);
              }
            }, 2000);
            setTimeout(function () {
              if (!interrupt) {
                l1.animate(.3);
              }
            }, 3000);
          } else {
            interrupt = true
            l1.animate(0, 10);
            setTimeout(function () {
              l1.animate(1);
            }, 300);
          }
        }

        function runEaseLoader() {

          if (firstLoad) {
            l2.animate(.3);
            setTimeout(function () {
              if (!interrupt) {
                l2.animate(1);
              }
            }, 2000);
            setTimeout(function () {
              if (!interrupt) {
                l2.animate(.3);
              }
            }, 3000);
          } else {
            interrupt = true
            l2._animate(0, 10);
            setTimeout(function () {
              l2.animate(1);
            }, 300);
          }
        }

        function runProgress() {
          if (firstLoad) {
            l3.animate(.75);
            setTimeout(function () {
              if (!interrupt) {
                l3.animate(1);
              }
            }, 2000);
            setTimeout(function () {
              if (!interrupt) {
                l3.animate(.75);
              }
            }, 3000);
          } else {
            interrupt = true;
            l3.animate(0, 10);
            setTimeout(function () {
              l3.animate(1);
            }, 300);
          }
        }
        function runEaseProgress() {
          if (firstLoad) {
            firstLoad = false;
            l4.animate(.75);
            setTimeout(function () {
              if (!interrupt) {
                l4.animate(1);
              }
            }, 3000);
            setTimeout(function () {
              if (!interrupt) {
                l4.animate(.75);
              }
            }, 4500);
          } else {
            //TEST
            interrupt = true;
            l4.animate(0, 10);
            setTimeout(function () {
              l4.animate(.5);
              setTimeout(function () {
                l4.effect = "ease";
                l4.animate(1, 5000);
              }, 450);
            }, 300);
          }
        }
      });

    </script>
  </div>
</body>

</html>