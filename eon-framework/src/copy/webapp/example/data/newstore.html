<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <!-- Import VimletJS  -->
  <title>EON STORE</title>
  <script src="/eon/eon.js"></script>

  <!-- Example style -->
  <link rel="stylesheet" href="/example/data/css/style.css">
  <link rel="stylesheet" href="/example/data/css/store.css">

</head>

<body>

  <!-- eon store usage -->
  <script>

    // Store object
    var store = new eon.store();

    store.onLoaded(function () {

      // Map source
      // var dataMap = new Map([["2", {
      //   name: "Cain",
      //   last: "Aman"
      // }], ["1", {
      //   name: "Samuel",
      //   last: "Milano"
      // }]]);

      // Array source
      var dataArray = [{
        id: "1",
        name: "Rich"
      }, {
        id: "2",
        name: "Tami"
      }]
      // Object source
      var dataObject = {
        1: {
          id: "1",
          name: "Rich"
        },
        2: {
          id: "2",
          name: "Tami"
        }
      }

      store.data = eon.util.arrayToMap(dataArray);
      console.log('----', store.data);

      store.data = eon.util.objectToMap(dataObject);
      console.log('----', store.data);

      console.log('::::::::::::::::::::::::::::::::::::::::');
      console.log('::::::::::::::::::::::::::::::::::::::::');
      console.log('::::::::::::::::::::::::::::::::::::::::');
      console.log('::::::::::::::::::::::::::::::::::::::::');
      console.log('::::::::::::::::::::::::::::::::::::::::');


      // ** Read entry
      store.read("1").result(function (error, data) {
        console.log('read 1', error, data);
      });

      // ** Read all
      store.read().sort("name", "ascending").result(function (error, data) {
        console.log('read all', error, data);
      });

      // ** Create
      store.create({
        id: "3",
        name: "Anais",
        last: "Toro"
      }).result(function (error, data) {
        console.log('read', error, data);
      });

      // ** Update
      store.update("3", {
        name: "Alain",
        last: "Petre",
        age: 14
      }).result(function (error, data) { });

      // ** Delete
      store.delete().result(function (error, data) {
        console.log('delete', error, data);
      });

    });

  </script>
</body>

</html>