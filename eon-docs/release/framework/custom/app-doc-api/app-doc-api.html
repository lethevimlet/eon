<style>
    app-doc-api {
        height: 100%;
    }

    #app-doc-api-header {
        margin-bottom: 20px;
    }

    #app-doc-api-apiMain {
        height: 100%;
    }

    .eon-layout-columnContainer {
        display: flex;
        flex-direction: column;
    }


    eon-menu {
        background-color: transparent !important;
        height: 100%;
        width: 100%;
    }

    eon-menu[layout="horizontal"] eon-item {
        line-height: 50px;
        min-width: 116px;
        flex-grow: 0 !important;
        color: #e6e6e6 !important;
    }

    eon-menu .eon-menu-wrapper {
        background-color: transparent !important;
    }

    #menuFunctionsContainer,
    #menuPropertiesContainer {
        max-height: 300px;
        display: flex;
        flex-direction: column;
    }

    app-doc-api .eon-bg4,
    .eon-bg3 {
        background: transparent !important;
    }

    app-doc-api .eon-menu-dropdown {
        background-color: #3a3a3a !important;
    }

    app-doc-api .dropdownTrigger {
        background-color: transparent !important;
    }

    .app-doc-api-menuDropdown .eon-menu-dropdown {
        min-width: 200px;
        z-index: 1000 !important;
    }

    .app-doc-api-menuDropdown .dropdown eon-item {
        min-width: 200px;
    }

    #app-doc-api-content {
        /* overflow-y: auto; */
        box-sizing: border-box;
        padding-right: 21px;
        padding-left: 25px;
        margin-bottom: 300px;
        padding-top: 20px;
        height: calc(100% - 55px);
        min-width: 400px;
    }

    .app-doc-api-t1 {
        font-size: 48px;
    margin-top: 65px !important;
        margin-bottom: 35px !important;
    }

    .app-doc-api-t2 {
        font-size: 24px;
        font-weight: bold;
    }

    .app-doc-api-t3 {
        font-size: 1.25em;
    }

    .app-doc-api-block {
        margin-bottom: 20px;
    }

    .app-doc-api-functionDetail {
        margin-top: 20px;
    }

    .app-doc-api-functionDetail app-doc-table {
        margin-bottom: 20px;
    }

    .app-doc-api-functionDetail eon-table {
        margin: 10px 0px;
    }

    .app-doc-api-textColorType {
        color: #ad7a02;
    }

    .app-doc-api-textColorFunction {
        margin: 5px 0px;
        color: #383838;
    }

    .app-doc-api-textColorName {
        color: #3c509c;
    }

    .app-doc-api-hidePrivate {
        display: none !important;
    }

    .app-doc-api-searchHide {
        display: none !important;
    }

    
    .app-doc-api-menu-fixed {
        position:absolute;
        height: 50px;
        width:100%;
    z-index: 200;
    }
    
    .app-doc-api-menu {
        display: flex;
        flex-direction: row;
        height: 50px;
        align-items: center;
    z-index: 201;
    padding-left:10px;
    background-color: #fafcff;
    -webkit-box-shadow: 0px 0.1px 1px 0px rgba(0,0,0,0.75);
-moz-box-shadow: 0px 0.1px 1px 0px rgba(0,0,0,0.75);
box-shadow: 0px 0.1px 1px 0px rgba(0,0,0,0.75);
    }

    #app-doc-api-togglePrivate {
        margin-left: auto;
        margin-right: 10px;
    }

    .app-doc-api-noExist {
        display: none;
    }


    #app-doc-api-goToTop {
        display: block;
        bottom: -100px;
        position: fixed;
        right: 30px;
        z-index: 99;
        border: none;
        outline: none;
        background-color: #333333;
        color: white;
        cursor: pointer;
        padding: 10px;
        border-radius: 50%;
        -webkit-box-shadow: 1px 1px 5px 0px rgba(0, 0, 0, 0.75);
        -moz-box-shadow: 1px 1px 5px 0px rgba(0, 0, 0, 0.75);
        box-shadow: 1px 1px 5px 0px rgba(0, 0, 0, 0.75);
    }

    .app-doc-api-showGoToTop {
        -webkit-animation: app-doc-api-showGoToTopAnim 0.7s forwards;
        /* for less modern browsers */
        animation: app-doc-api-showGoToTopAnim 0.7s forwards;
    }

    .app-doc-api-hideGoToTop {
        -webkit-animation: app-doc-api-hideGoToTopAnim 0.5s forwards;
        /* for less modern browsers */
        animation: app-doc-api-hideGoToTopAnim 0.5s forwards;
    }

    /* Safari 4.0 - 8.0 */

    @-webkit-keyframes app-doc-api-showGoToTopAnim {
        from {
            bottom: -100px;
        }
        to {
            bottom: 10px;
        }
    }

    @keyframes app-doc-api-showGoToTopAnim {
        from {
            bottom: -100px;
        }
        to {
            bottom: 10px;
        }
    }

    /* Safari 4.0 - 8.0 */

    @-webkit-keyframes app-doc-api-hideGoToTopAnim {
        from {
            bottom: 10px;
        }
        to {
            bottom: -100px;
        }
    }

    @keyframes app-doc-api-hideGoToTopAnim {
        from {
            bottom: 10px;
        }
        to {
            bottom: -100px;
        }
    }

    
    @media only screen and (max-width: 700px) {
.app-doc-api-menu {
    padding-left:50px;
}
    }

</style>

<template>
        <eon-scroll thickness="8">
            <div class="app-doc-api-menu-fixed">
                <div class="app-doc-api-menu">
                <app-doc-api-menu-item label="Html Properties" id="htmlPropertiesMenu"></app-doc-api-menu-item>
                <app-doc-api-menu-item label="Properties" id="propertiesMenu"></app-doc-api-menu-item>
                <app-doc-api-menu-item label="Functions" id="functionsMenu"></app-doc-api-menu-item>
                <eon-button id="app-doc-api-togglePrivate" class="" label="Show Private" vicon="visibility" onclick="document.querySelector('app-doc-api').togglePrivate(this);"></eon-button>
            </div>
        </div>

            <div id="app-doc-api-content">
                <div id="app-doc-api-header">
                </div>
                <div>
                    <div class="app-doc-api-block" id="htmlA">
                        <div class="app-doc-api-t2">
                            Html attributes
                        </div>
                        <app-doc-table id="htmlAttributesTable" class="app-doc-api-noExist" columntitle="Attribute, Type, Description" columnwidth="200px ,200px ,calc(100% - 400px)"></app-doc-table>
                    </div>

                    <div class="app-doc-api-block">
                        <div class="app-doc-api-t2">
                            Properties
                        </div>
                        <div id="noPublicProp" class="notFound app-doc-api-noExist">None</div>
                        <app-doc-table id="publicPropTable" class="app-doc-api-noExist" columntitle="Property, Type, Description" columnwidth="200px ,200px ,calc(100% - 400px)"></app-doc-table>
                    </div>

                    <div class="app-doc-api-block private">
                        <div class="app-doc-api-t2">
                            Private properties
                        </div>
                        <div id="noPrivateProp" class="notFound app-doc-api-noExist">None</div>
                        <app-doc-table id="privatePropTable" class="app-doc-api-noExist" columntitle="Property, Type, Description" columnwidth="200px ,200px ,calc(100% - 400px)"></app-doc-table>
                    </div>

                    <div class="app-doc-api-block">
                        <div class="app-doc-api-t2">
                            Functions
                        </div>
                        <div id="noPublicFuncSumm" class="notFound app-doc-api-noExist">None</div>
                        <app-doc-table id="publicFuncSummTable" class="app-doc-api-noExist" columntitle="Function, Return, Description" columnwidth="200px ,200px ,calc(100% - 400px)"></app-doc-table>
                        <div id="publicFunctionDetails"></div>
                    </div>
                    <div class="app-doc-api-block private">
                        <div class="app-doc-api-t2">
                            Private functions
                        </div>
                        <div id="noPrivateFuncSumm" class="notFound app-doc-api-noExist">None</div>
                        <app-doc-table id="privateFuncSummTable" class="app-doc-api-noExist" columntitle="Function, Return, Description" columnwidth="200px ,200px ,calc(100% - 400px)"></app-doc-table>
                        <div id="privateFunctionDetails"></div>
                    </div>


                </div>
            </div>
        </eon-scroll>
        <button id="app-doc-api-goToTop" onclick="document.querySelector('app-doc-api').goToTop();">
            <i class="material-icons">arrow_upward</i>
        </button>
</template>

<script>
    eon.element("app-doc-api", {

      
        dependencies: [
            "app-doc-api-menu-item"
        ],

        properties: {},

        privateProperties: {
            misc: {
                value: {}
            },
            refs: {
                value: {}
            }
        },

        functions: {
            // @function setData (public) [Set up document] @param data @param config
            setData(data, config) {
                this._setupData(data, config);
            },
            // @function togglePrivate (public) [Toggle private api] @param el [Toggle button]
            togglePrivate(el) { // Hide show private data
                var privateElements = document.querySelectorAll(".private");

                var isPrivate = false;
                privateElements.forEach(function (privateElement) {
                    privateElement.classList.toggle("app-doc-api-hidePrivate");
                    if (privateElement.classList.contains("app-doc-api-hidePrivate")) {
                        isPrivate = true;
                    }
                });

                var button = document.querySelector("#app-doc-api-togglePrivate");
                if (isPrivate) {
                    document.querySelector("#propertiesMenu").onReady(function () {
                        document.querySelector("#propertiesMenu").togglePrivate(true);
                    });
                    document.querySelector("#functionsMenu").onReady(function () {
                        document.querySelector("#functionsMenu").togglePrivate(true);
                    });
                    button.label = "Show Private";
                } else {
                    document.querySelector("#propertiesMenu").onReady(function () {
                        document.querySelector("#propertiesMenu").togglePrivate();
                    });
                    document.querySelector("#functionsMenu").onReady(function () {
                        document.querySelector("#functionsMenu").togglePrivate();
                    });
                    button.label = "Hide Private";
                }
                if (el) {
                    if (el.vicon === "visibility") {
                        el.vicon = "visibility-off";
                    } else {
                        el.vicon = "visibility";
                    }
                }
                var tables = document.querySelectorAll("app-doc-table");
                if (tables) {
                    tables.forEach(function (table) {
                        table.onReady(function () {
                            table.adjustRowHeight();
                        });
                    });
                }
            },
            // @function goTo (public) [Scroll to id position] @param id
            goTo(id) {
                this._misc.scroll.scrollTo(0);
                this._misc.scroll.scrollTo(document.querySelector("#" + id).getBoundingClientRect()
                    .top - 105, null, 0.2);
            },
            // @function goToFunction (public) [Scroll to id function position] @param id
            goToFunction(id) {
                this._misc.scroll.scrollTo(0);
                this._misc.scroll.scrollTo(document.querySelector("#" + id).getBoundingClientRect()
                    .top - 105, null, 0.2);
            },
            // @function goToTop (public) [Scroll to top]
            goToTop() { // Scroll to top
                this._misc.scroll.scrollTo(0, null, 0.05);
            }
        },

        privateFunctions: {
            // @function init (private) [Initialize api]
            init: function () {
                var el = this;
                var scroll = this.querySelector("eon-scroll");
                scroll.onScrolled(function () {
                    el._scrollFunction();
                });
                this._misc.scroll = scroll;
                this._misc.apiContent = document.querySelector("#app-doc-api-content");
                this._misc.goToTop = document.querySelector("#app-doc-api-goToTop");
            },
            // @function setRefs (private)
            setRefs: function () {
                var el = this;

            },
            // @function hidePrivate (private) [Force to hide private data]
            hidePrivate: function () {
                var privateElements = document.querySelectorAll(".private");
                privateElements.forEach(function (privateElement) {
                    privateElement.classList.add("app-doc-api-hidePrivate");
                });
                document.querySelector("#app-doc-api-togglePrivate").vicon = "visibility-off";
            },
            // @function createDiv (private) {html object} @param options
            createDiv: function (options) {
                var currentDiv = document.createElement("div");
                if (options.class) {
                    if (Array.isArray(options.class)) {
                        options.class.forEach(function (cc) {
                            currentDiv.classList.add(cc);
                        });
                    } else {
                        currentDiv.classList.add(options.class);
                    }
                }
                if (options.content) {
                    currentDiv.appendChild(options.content);
                }
                if (options.innerText) {
                    currentDiv.innerText = options.innerText;
                }
                if (options.id) {
                    currentDiv.id = options.id;
                }
                return currentDiv;
            },
            // @function scrollFunction (private) [eon-scroll onScrolled listener. Used to toggle go to top button]
            scrollFunction: function () {                                
                if (this._misc.scroll.scrollTop > 0) {
                    this._misc.goToTop.classList.add("app-doc-api-showGoToTop");
                    this._misc.goToTop.classList.remove("app-doc-api-hideGoToTop");
                } else {
                    this._misc.goToTop.classList.remove("app-doc-api-showGoToTop");
                    this._misc.goToTop.classList.add("app-doc-api-hideGoToTop");
                }
            },
            // @function cleanData (private) [Clean data before setting up]
            cleanData: function () {
                var el = this;
                document.querySelector("#publicFuncSummTable").classList.add("app-doc-api-noExist");
                document.querySelector("#privateFuncSummTable").classList.add("app-doc-api-noExist");
                document.querySelector("#publicFunctionDetails").innerHTML = "";
                document.querySelector("#privateFunctionDetails").innerHTML = "";
                document.querySelector("#app-doc-api-header").innerHTML = "";
                document.querySelector("#noPublicProp").classList.add("app-doc-api-noExist");
                document.querySelector("#htmlA").classList.remove("app-doc-api-noExist");
                document.querySelector("#noPrivateProp").classList.add("app-doc-api-noExist");
                document.querySelector("#noPrivateFuncSumm").classList.add("app-doc-api-noExist");
                document.querySelector("#htmlAttributesTable").classList.add("app-doc-api-noExist");
                document.querySelector("#publicPropTable").classList.add("app-doc-api-noExist");
                document.querySelector("#privatePropTable").classList.add("app-doc-api-noExist");
                document.querySelector("#htmlPropertiesMenu").reset();
                document.querySelector("#propertiesMenu").reset();
                document.querySelector("#functionsMenu").reset();
                el._hidePrivate();
                el._misc.scroll.scrollTo(0);
            },
            // @function setupData (private) [Set up document] @param data @param config
            setupData: function (data, config) {
                var el = this;

                el._cleanData();

                el._misc.parsedCount = 4; // Counter to know when all api parts are appended
                //// Internal functions
                var PRIVATE = "private";
                var __hasHtmlAttributes = null;
                var __hasPublicProperties = null;
                var __hasPrivateProperties = null;
                var __hasPublicFunctions = null;
                var __hasPrivateFunctions = null;


                //@function formatType [Format type block with user instructions] @param typeStr
                function formatType(typeStr) {
                    if (typeStr) {
                        typeStr = typeStr.split("\\n").join("<br />");
                        if (config.__typeUpperCase) {
                            typeStr = typeStr.substring(0, 1).toUpperCase() + typeStr.substring(1, typeStr.length);
                        } else if (config.__typeLowerCase) {
                            typeStr = typeStr.substring(0, 1).toLowerCase() + typeStr.substring(1, typeStr.length);
                        }
                    } else if (typeof typeStr === "undefined") {
                        typeStr = "";
                    }
                    return typeStr;
                }

                //@function hasHtmlAttributes [Return if current doc has html attributes or not]
                function hasHtmlAttributes() {
                    if (__hasHtmlAttributes === null) {
                        __hasHtmlAttributes = false;
                        if (data.htmlAttributes.length > 0) {
                            __hasHtmlAttributes = true;
                        }
                    }
                    return __hasHtmlAttributes;
                }

                //@function getHtmlAttributes [Return json with html attributes]
                function getHtmlAttributes() {
                    var htmlAttributes = [];
                    if (hasHtmlAttributes()) {
                        data.htmlAttributes.forEach(function (htmlA) {
                            var currentHtmlA = {};
                            currentHtmlA.data = [];
                            currentHtmlA.id = "htmlA" + htmlA.name;
                            currentHtmlA.data.push({
                                value: htmlA.name
                            });
                            currentHtmlA.data.push({
                                value: formatType(htmlA.type)
                            });
                            currentHtmlA.data.push({
                                value: formatDescription(htmlA.description)
                            });
                            htmlAttributes.push(currentHtmlA);
                        });
                    }
                    return htmlAttributes;
                }

                //@function hasPublicProperties [Return if current doc has public properties or not]
                function hasPublicProperties() {
                    if (__hasPublicProperties === null) {
                        __hasPublicProperties = false;
                        data.properties.forEach(function (prop) {
                            if (!prop.scope || prop.scope != PRIVATE) {
                                __hasPublicProperties = true;
                            }
                        });
                    }
                    return __hasPublicProperties;
                }

                //@function getPublicProperties [Return json with public properties]
                function getPublicProperties() {
                    var publicProperties = [];
                    if (hasPublicProperties()) {
                        data.properties.forEach(function (prop) {
                            if (!prop.scope || prop.scope != PRIVATE) {
                                var currentPublicP = {};
                                currentPublicP.data = [];
                                currentPublicP.id = "proppub" + prop.name;
                                currentPublicP.data.push({
                                    value: prop.name
                                });
                                currentPublicP.data.push({
                                    value: formatType(prop.type)
                                });
                                currentPublicP.data.push({
                                    value: formatDescription(prop.description)
                                });
                                publicProperties.push(currentPublicP);
                            }
                        });
                    }
                    return publicProperties;
                }

                //@function hasPrivateProperties [Return if current doc has private properties or not]
                function hasPrivateProperties() {                    
                    if (__hasPrivateProperties === null) {
                        __hasPrivateProperties = false;
                        data.properties.forEach(function (prop) {
                            if (prop.scope && prop.scope === PRIVATE) {
                                __hasPrivateProperties = true;
                            }
                        });
                    }
                    return __hasPrivateProperties;
                }

                //@function getPrivateProperties [Return json with private properties]
                function getPrivateProperties() {
                    var privateProperties = [];
                    if (hasPrivateProperties()) {
                        data.properties.forEach(function (prop) {
                            if (prop.scope && prop.scope === PRIVATE) {
                                var currentPrivateP = {};
                                currentPrivateP.data = [];
                                currentPrivateP.id = "proppri" + prop.name;
                                currentPrivateP.data.push({
                                    value: prop.name
                                });
                                currentPrivateP.data.push({
                                    value: formatType(prop.type)
                                });
                                currentPrivateP.data.push({
                                    value: formatDescription(prop.description)
                                });
                                privateProperties.push(currentPrivateP);
                            }
                        });
                    }
                    return privateProperties;
                }

                //@function hasPublicFunctions [Return if current doc has public functions or not]
                function hasPublicFunctions() {
                    if (__hasPublicFunctions === null) {
                        __hasPublicFunctions = false;
                        data.methods.forEach(function (method) {
                            if (!method.scope || method.scope != PRIVATE) {
                                __hasPublicFunctions = true;
                            }
                        });
                    }
                    return __hasPublicFunctions;
                }

                //@function hasPrivateFunctions [Return if current doc has private functions or not]
                function hasPrivateFunctions() {
                    if (__hasPrivateFunctions === null) {
                        __hasPrivateFunctions = false;
                        data.methods.forEach(function (method) {
                            if (method.scope && method.scope === PRIVATE) {
                                __hasPrivateFunctions = true;
                            }
                        });
                    }
                    return __hasPrivateFunctions;
                }

                // @function getPublicFunctionsSummary [Return json with public functions summary]
                function getPublicFunctionsSummary() {
                    var publicFunctionsSummary = [];
                    if (hasPublicFunctions()) {
                        data.methods.forEach(function (method) {
                            if (!method.scope || method.scope != PRIVATE) {
                                var currentPublicFSummary = {};
                                currentPublicFSummary.data = [];
                                currentPublicFSummary.data.push({
                                    value: method.name,
                                    onclick: "this.parentNode.parentNode.parentNode.parentcomponent.goToFunction('funcpub" +
                                        method.name + "');",
                                    color: "#5264c3"
                                });
                                if (method.return) {
                                    currentPublicFSummary.data.push({
                                        value: formatType(method.return.type)
                                    });
                                } else if (config.__voidControl) {
                                    currentPublicFSummary.data.push({
                                        value: "Void"
                                    });
                                } else {
                                    currentPublicFSummary.data.push({
                                        value: ""
                                    });
                                }
                                currentPublicFSummary.data.push({
                                    value: formatDescription(method.description)
                                });
                                publicFunctionsSummary.push(currentPublicFSummary);
                            }
                        });
                    }
                    return publicFunctionsSummary;
                }

                // @function getPrivateFunctionsSummary [Return json with private functions summary]
                function getPrivateFunctionsSummary() {
                    var privateFunctionsSummary = [];
                    if (hasPrivateFunctions()) {
                        data.methods.forEach(function (method) {
                            if (method.scope && method.scope === PRIVATE) {
                                var currentPrivateFSummary = {};
                                currentPrivateFSummary.data = [];
                                currentPrivateFSummary.data.push({
                                    value: method.name,
                                    onclick: "this.parentNode.parentNode.parentNode.parentcomponent.goToFunction('funcpri" +
                                        method.name + "');",
                                    color: "blue"
                                });
                                if (method.return) {
                                    currentPrivateFSummary.data.push({
                                        value: formatType(method.return.type)
                                    });
                                } else if (config.__voidControl) {
                                    currentPrivateFSummary.data.push({
                                        value: "Void"
                                    });
                                } else {
                                    currentPrivateFSummary.data.push({
                                        value: ""
                                    });
                                }
                                currentPrivateFSummary.data.push({
                                    value: formatDescription(method.description)
                                });
                                privateFunctionsSummary.push(currentPrivateFSummary);
                            }
                        });
                    }
                    return privateFunctionsSummary;
                }

                //@function printPublicFuntions [Returns public functions details as html string]
                function printPublicFuntions() {
                    var publicFunctionsDiv = document.querySelector("#publicFunctionDetails");
                    if (hasPublicFunctions()) {
                        data.methods.forEach(function (method) {
                            if (!method.scope || method.scope != PRIVATE) {
                                publicFunctionsDiv.appendChild(printFunction(method));
                            }
                        });
                    }
                }

                //@function printPrivateFuntions [Returns private functions details as html string]
                function printPrivateFuntions() {
                    var privateFunctionsDiv = document.querySelector("#privateFunctionDetails");
                    if (hasPrivateFunctions()) {
                        data.methods.forEach(function (method) {
                            if (method.scope && method.scope === PRIVATE) {
                                privateFunctionsDiv.appendChild(printFunction(method, true));
                            }
                        });
                    }
                }

                // @function printFunction [Return function data as html string]
                function printFunction(method, isPrivate) {
                    var fragment = document.createDocumentFragment();
                    var result = el._createDiv({
                        class: "app-doc-api-functionDetail"
                    });
                    var details = el._createDiv({
                        class: "app-doc-api-t3",
                        innerText: "Details"
                    });
                    result.appendChild(details);
                    var methodId = "";
                    if (isPrivate) {
                        methodId = "funcpri" + method.name;
                    } else {
                        methodId = "funcpub" + method.name;
                    }
                    var fName = el._createDiv({
                        class: ["app-doc-api-t3", "app-doc-api-textColorFunction"],
                        id: methodId
                    });
                    var sName = document.createElement("span");
                    sName.innerText = method.name + "(";
                    fName.appendChild(sName);
                    if (method.params.length > 0) {
                        for (var methodParamI = 0; methodParamI < method.params.length; methodParamI++) {
                            var currentParam = document.createElement("span");
                            currentParam.classList.add("app-doc-api-textColorName");
                            currentParam.innerText = method.params[methodParamI].name;
                            if (method.params[methodParamI].optional) {
                                currentParam.innerText += '*';
                            }
                            if (methodParamI < (method.params.length - 1)) {
                                currentParam.innerText += ', ';
                            }
                            fName.appendChild(currentParam);
                        }
                    }
                    var sClose = document.createElement("span");
                    sClose.innerText = ")";
                    fName.appendChild(sClose);
                    result.appendChild(fName);
                    if (method.description) {
                        var desc = el._createDiv({
                            innerText: formatDescription(method.description)
                        });
                        result.appendChild(desc);
                    }
                    if (method.params.length > 0) {
                        var table = document.createElement("app-doc-table");
                        table.columntitle = "Parameter, Type, Description";
                        table.columnwidth = "200px ,200px ,calc(100% - 400px)";
                        var params = getParams(method);
                        params.forEach(function (param) {
                            var row = document.createElement("eon-row");
                            param.forEach(function (paramCell) {
                                var cell = document.createElement("eon-cell");
                                cell.innerText = paramCell;
                                row.appendChild(cell);
                            });
                            table.appendChild(row);
                        });
                        result.appendChild(table);
                    }
                    if (method.return) {
                        el._misc.parsedCount++;
                        var table = document.createElement("app-doc-table");
                        table.ondrawn(function () {
                            setTimeout(function () {
                                if (document.querySelector('app-doc-api')) {
                                    document.querySelector('app-doc-api')._onDrawn();
                                }
                            }, 0);
                        });
                        table.columntitle = "Return, Description";
                        table.columnwidth = "200px ,calc(100% - 200px)";
                        var methodReturn = getReturn(method);
                        var row = document.createElement("eon-row");
                        methodReturn.forEach(function (paramReturn) {
                            var cell = document.createElement("eon-cell");
                            cell.innerText = paramReturn;
                            row.appendChild(cell);
                        });
                        table.appendChild(row);
                        result.appendChild(table);
                    } else {
                        if (config.__voidControl) {
                            el._misc.parsedCount++;
                            var table = document.createElement("app-doc-table");
                            table.ondrawn(function () {
                                setTimeout(function () {
                                    document.querySelector('app-doc-api')._onDrawn();
                                }, 0);
                            });
                            table.columntitle = "Return, Description";
                            table.columnwidth = "200px ,calc(100% - 200px)";
                            var methodReturn = getReturn(method, true);
                            var row = document.createElement("eon-row");
                            methodReturn.forEach(function (paramReturn) {
                                var cell = document.createElement("eon-cell");
                                cell.innerText = paramReturn;
                                row.appendChild(cell);
                            });
                            table.appendChild(row);
                            result.appendChild(table);
                        }
                    }
                    if (method.exceptions.length > 0) {
                        el._misc.parsedCount++;
                        var table = document.createElement("app-doc-table");
                        table.ondrawn(function () {
                            setTimeout(function () {
                                document.querySelector('app-doc-api')._onDrawn();
                            }, 0);
                        });
                        table.columntitle = "Exception, Description";
                        table.columnwidth = "200px ,calc(100% - 200px)";
                        var excepts = getExceptions(method);
                        excepts.forEach(function (except) {
                            var row = document.createElement("eon-row");
                            except.forEach(function (exceptCell) {
                                var cell = document.createElement("eon-cell");
                                cell.innerText = exceptCell;
                                row.appendChild(cell);
                            });
                            table.appendChild(row);
                        });
                        result.appendChild(table);
                    }
                    return result;
                }


                // @function getParams {json} [Get function params]
                function getParams(method) {
                    var params = [];
                    method.params.forEach(function (param) {
                        var currentParam = [];
                        var pName = param.name;
                        if (param.optional) {
                            pName += " (optional)";
                        }
                        currentParam.push(pName);
                        currentParam.push(formatType(param.type) || "");
                        currentParam.push(formatDescription(param.description) || "");
                        params.push(currentParam);
                    });
                    return params;
                }

                // @function getReturn
                function getReturn(method, isVoid) {
                    var result = [];
                    if (!isVoid) {
                        result.push(formatType(method.return.type));
                        result.push(formatDescription(method.return.description) || "");
                    } else {
                        result.push("Void");
                    }
                    return result;
                }

                // @function getExceptions
                function getExceptions(method) {
                    var result = [];
                    method.exceptions.forEach(function (except) {
                        var currentException = [];
                        currentException.push(except.name);
                        currentException.push(formatDescription(except.description) || "");
                        result.push(currentException);
                    });
                    return result;
                }

                //@function formatDescription [Format description block with user instructions] @param descriptionStr
                function formatDescription(descriptionStr) {
                    if (descriptionStr) {
                        descriptionStr = descriptionStr.split("\\n").join("<br />");
                        if (config.__addDot) {
                            if (descriptionStr.charAt(descriptionStr.length - 1) != ".") {
                                descriptionStr += ".";
                            }
                        } else if (config.__removeDot) {
                            if (descriptionStr.charAt(descriptionStr.length - 1) === ".") {
                                descriptionStr.slice(-1);
                            }
                        }
                        if (config.__descriptionUpperCase) {
                            descriptionStr = descriptionStr.charAt(0).toUpperCase() + descriptionStr.slice(
                                1);
                        } else if (config.__descriptionLowerCase) {
                            descriptionStr = descriptionStr.charAt(0).toLowerCase() + descriptionStr.slice(
                                1);
                        }
                    }
                    descriptionStr = descriptionStr === undefined ? "" : descriptionStr;
                    return descriptionStr;
                }

                this.data.fileName = data.path.replace(/^.*[\\\/]/, '');
                this.data.header = data.header;
                this.data.band = config.__band;

                var header = document.createDocumentFragment();
                var fileName = document.createElement("div");
                fileName.classList.add("app-doc-api-t1");
                fileName.innerText = this.data.fileName;
                header.appendChild(fileName);
                var headerText = document.createElement("p");
                this.data.header.forEach(function (cHeader) {
                    headerText.innerText += cHeader + "<br>";
                });
                header.appendChild(headerText);
                document.querySelector("#app-doc-api-header").appendChild(header);

                setTimeout(function () {
                    document.querySelector('app-doc-api')._onDrawn();
                }, 0);


                // Set html attributes
                if (hasHtmlAttributes()) {
                    var htmlAttributeTable = document.querySelector("#htmlAttributesTable");
                    htmlAttributeTable.cleanTable();
                    htmlAttributeTable.classList.remove("app-doc-api-noExist");
                    var htmlAttributes = getHtmlAttributes();
                    htmlAttributes.forEach(function (ha) {
                        htmlAttributeTable.addRow(ha);
                    });
                } else {
                    document.querySelector("#htmlA").classList.add("app-doc-api-noExist");
                }
                // Set public properties
                if (hasPublicProperties()) {
                    var publicPropertyTable = document.querySelector("#publicPropTable");
                    publicPropertyTable.cleanTable();
                    publicPropertyTable.classList.remove("app-doc-api-noExist");
                    var publicProperties = getPublicProperties();
                    publicProperties.forEach(function (pp) {
                        publicPropertyTable.addRow(pp);
                    });
                } else {
                    document.querySelector("#noPublicProp").classList.remove("app-doc-api-noExist");
                }
                // Set private properties
                if (hasPrivateProperties()) {
                    var privatePropertyTable = document.querySelector("#privatePropTable");
                    privatePropertyTable.cleanTable();
                    privatePropertyTable.classList.remove("app-doc-api-noExist");
                    var privateProperties = getPrivateProperties();
                    privateProperties.forEach(function (pp) {
                        privatePropertyTable.addRow(pp);
                    });
                } else {
                    document.querySelector("#noPrivateProp").classList.remove("app-doc-api-noExist");
                }


                // Set public functions summary
                if (hasPublicFunctions()) {
                    var publicFunctionTable = document.querySelector("#publicFuncSummTable");
                    publicFunctionTable.parentcomponent = el;
                    publicFunctionTable.cleanTable();
                    publicFunctionTable.classList.remove("app-doc-api-noExist");
                    var publicFunctions = getPublicFunctionsSummary();
                    publicFunctions.forEach(function (pp) {
                        publicFunctionTable.addRow(pp);
                    });
                } else {
                    document.querySelector("#noPublicFuncSumm").classList.remove("app-doc-api-noExist");
                }

                // Set private functions summary
                if (hasPrivateFunctions()) {
                    var privateFunctionTable = document.querySelector("#privateFuncSummTable");
                    privateFunctionTable.parentcomponent = el;
                    privateFunctionTable.cleanTable();
                    privateFunctionTable.classList.remove("app-doc-api-noExist");
                    var privateFunctions = getPrivateFunctionsSummary();
                    privateFunctions.forEach(function (pp) {
                        privateFunctionTable.addRow(pp);
                    });
                } else {
                    document.querySelector("#noPrivateFuncSumm").classList.remove("app-doc-api-noExist");
                }


                // Set html attributes menu
                var htmlPropertiesMenu = document.querySelector("#htmlPropertiesMenu");
                var hasMenuPublicHtmlA = false;
                data.htmlAttributes.forEach(function (htmlA) {
                    hasMenuPublicHtmlA = true;
                    htmlPropertiesMenu.addItem(htmlA.name, function () {
                        document.querySelector("app-doc-api").goTo('htmlA' +
                            htmlA.name);
                    });
                });
                if (!hasMenuPublicHtmlA) {
                    htmlPropertiesMenu.style.display = "none";
                }


                // Set properties menu
                var propertiesMenu = document.querySelector("#propertiesMenu");
                var hasProperties = false;
                data.properties.forEach(function (prop) {
                    if (prop.scope && prop.scope.toLowerCase() === PRIVATE) {
                        propertiesMenu.addItem(prop.name, function () {
                            document.querySelector("app-doc-api").goTo('proppri' +
                                prop.name);
                        }, true);
                        hasProperties = true;
                    } else {
                        propertiesMenu.addItem(prop.name, function () {
                            document.querySelector("app-doc-api").goTo('proppub' +
                                prop.name);
                        });
                        hasProperties = true;
                    }
                });
                if (!hasProperties) {
                    propertiesMenu.style.display = "none";
                }

                // Set functions menu
                var functionsMenu = document.querySelector("#functionsMenu");
                var hasFunctions = false;
                data.methods.forEach(function (method) {
                    if (method.scope && method.scope.toLowerCase() === PRIVATE) {
                        functionsMenu.addItem(method.name, function () {
                            document.querySelector("app-doc-api").goTo('funcpri' +
                                method.name);
                        }, true);
                        hasFunctions = true;
                    } else {
                        functionsMenu.addItem(method.name, function () {
                            document.querySelector("app-doc-api").goTo('funcpub' +
                                method.name);
                        });
                        hasFunctions = true;
                    }
                });
                if (!hasFunctions) {
                    functionsMenu.style.display = "none";
                }

                setTimeout(function () {
                    document.querySelector('app-doc-api')._onDrawn();
                }, 0);

                // Print function details
                printPublicFuntions();
                printPrivateFuntions();

            },
            // @function onDrawn (private) [Called when api is parsed and shown on screen]
            onDrawn: function () {
                var el = this;
                el._misc.parsedCount--;
                if (el._misc.parsedCount <= 0) {
                    eon.triggerCallback("ondrawn", el, el, [el]);
                    var scrolls = document.querySelector("app-doc-api").querySelectorAll("eon-scroll");
                    scrolls.forEach(function (scr) {
                        scr.update();
                    });
                }
            }
        },

        onWindowResize: function (event) {},


        onCreated: function () {
            eon.createCallback("ondrawn", this);                      
        },

        onBubbleRender: function () {
            var el = this;
            el._init();
            el.togglePrivate(); // Hide private properties and functions at the beggining
        }



    });
</script>