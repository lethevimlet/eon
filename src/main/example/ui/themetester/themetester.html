<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>vComet Theme Tester</title>

  <!-- Import VimletJS  -->
  <script src="/vcomet/vcomet.js"></script>

  <!-- Example style -->
  <link rel="stylesheet" href="css/style.css">

  <!-- UI components -->
  <script>
    vcomet.import([
      "/vcomet/ui/vc-appmenu",
      "/vcomet/ui/vc-button",
      "/vcomet/ui/vc-checkbox",
      "/vcomet/ui/vc-combobox",
      "/vcomet/ui/vc-contextmenu",
      "/vcomet/ui/vc-datebox",
      "/vcomet/ui/vc-datepicker",
      "/vcomet/ui/vc-dialog",
      "/vcomet/ui/vc-layout",
      "/vcomet/ui/vc-scroll",
      "/vcomet/ui/vc-tree",
      "/vcomet/ui/vc-searchbar",
      "/vcomet/ui/vc-text",
      "/vcomet/data/store/vc-store.html"
    ]);
  </script>

</head>

<body>

  <vc-layout class="main" type="column">

    <vc-layout class="tMenuBar" justified="between" align="center">

      <vc-searchbar class="tSearchbar">
        <input class="tText" type="text" name="tText" placeholder="Search" onkeyup='document.querySelector(".tSearchbar").search(document.querySelector(".tSearchbar"));'></input>
      </vc-searchbar>

      <div class="tIcon"></div>

    </vc-layout>

    <vc-layout class="tContent" type="row">

      <vc-layout class="tTreeContainer">
        <vc-tree class="tTree" icons="expand">
          <vc-treenode id="appmenu" path="appmenu"></vc-treenode>
          <vc-treenode id="button" path="button"></vc-treenode>
          <vc-treenode id="checkbox" path="checkbox"></vc-treenode>
          <vc-treenode id="combobox" path="combobox"></vc-treenode>
          <vc-treenode id="contextmenu" path="contextmenu"></vc-treenode>
          <vc-treenode id="date" path="date"></vc-treenode>
          <vc-treenode id="dialog" path="dialog"></vc-treenode>
          <vc-treenode id="appmenu" path="docker"></vc-treenode>
          <vc-treenode id="appmenu" path="drawer"></vc-treenode>
          <vc-treenode id="appmenu" path="form"></vc-treenode>
          <vc-treenode id="appmenu" path="grid"></vc-treenode>
          <vc-treenode id="appmenu" path="gutter"></vc-treenode>
          <vc-treenode id="appmenu" path="gutterflex"></vc-treenode>
          <vc-treenode id="appmenu" path="headerpannel"></vc-treenode>
          <vc-treenode id="appmenu" path="layout"></vc-treenode>
          <vc-treenode id="appmenu" path="loader"></vc-treenode>
          <vc-treenode id="appmenu" path="loadingmask"></vc-treenode>
          <vc-treenode id="appmenu" path="menu"></vc-treenode>
          <vc-treenode id="appmenu" path="panel"></vc-treenode>
          <vc-treenode id="appmenu" path="radio"></vc-treenode>
          <vc-treenode id="appmenu" path="scroll"></vc-treenode>
          <vc-treenode id="appmenu" path="searchbar"></vc-treenode>
          <vc-treenode id="appmenu" path="separator"></vc-treenode>
          <vc-treenode id="appmenu" path="slider"></vc-treenode>
          <vc-treenode id="appmenu" path="spinner"></vc-treenode>
          <vc-treenode id="appmenu" path="stackcontainer"></vc-treenode>
          <vc-treenode id="appmenu" path="stiky"></vc-treenode>
          <vc-treenode id="appmenu" path="stikylateral"></vc-treenode>
          <vc-treenode id="appmenu" path="swiper"></vc-treenode>
          <vc-treenode id="appmenu" path="tabs"></vc-treenode>
          <vc-treenode id="appmenu" path="text"></vc-treenode>
          <vc-treenode id="appmenu" path="toggle"></vc-treenode>
          <vc-treenode id="appmenu" path="togglemenu"></vc-treenode>
          <vc-treenode id="appmenu" path="tree"></vc-treenode>
          <vc-treenode id="appmenu" path="video"></vc-treenode>
          <!-- <vc-treenode path="example/son"></vc-treenode> -->
        </vc-tree>
      </vc-layout>

      <vc-layout class="tViewContainer">
        <h1>Welcome to the vComet Theme Tester!</h1>
      </vc-layout>

    </vc-layout>

  </vc-layout>

  <script type="text/javascript">
    vcomet.onReady(function () {

      // Searchbar search
      document.querySelector(".tSearchbar").onSearch(function (filters) {

        var name = filters.tText;
        var tree = document.querySelector(".tTree");
        var toFilterChilds = tree.querySelector(".vc-tree-tree").children;

        for (var i = 0; i < toFilterChilds.length; i++) {
          if (toFilterChilds[i].getAttribute("path").toLowerCase().indexOf(name.toLowerCase()) > -1) {
            toFilterChilds[i].classList.remove("notVisible");
          } else {
            toFilterChilds[i].classList.add("notVisible");
          }
        }

      });


      // Charge element view 
      var tree = document.querySelector(".tTree");
      var treeScroll = tree.querySelector("vc-scroll");
      var treeChilds = tree.querySelector(".vc-tree-tree").children;

      treeScroll.thickness = "10";

      for (var i = 0; i < treeChilds.length; i++) {
        treeChilds[i].addEventListener("click", function () {
          htmlAjaxCall(this.id);
        });
      }

      function htmlAjaxCall(id) {
        var xhr = new XMLHttpRequest();
        var container = document.querySelector(".tViewContainer");
        var file = "section/" + id + ".html";

        container.innerHTML = "";

        xhr.open('GET', file, true);

        xhr.onreadystatechange = function () {
          if (this.readyState !== 4) return;
          if (this.status !== 200) return;

          var fragment = vcomet.fragmentFromString(this.responseText);

          container.appendChild(fragment);

        };

        xhr.send();
      }

    });
  </script>
</body>

</html>